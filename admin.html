<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ¬Ø± | Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background: #0b0e14; color: white; padding: 20px; }
        .order-card { background: #151921; padding: 15px; border-radius: 10px; margin-bottom: 10px; border-right: 5px solid #00d4ff; display: flex; justify-content: space-between; align-items: center; }
        .info { line-height: 1.6; }
        .price { color: #00d4ff; font-weight: bold; }
        .delete-btn { background: #ff4757; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>ğŸ“¦ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø²Ø¨Ø§Ø¦Ù† Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h1>
    <div id="ordersList">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Ø§Ø³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø§Ù„Ù€ Config Ø§Ù„Ø®Ø§Øµ Ø¨Ù…Ø´Ø±ÙˆØ¹Ùƒ market-dz-3cd05
        const firebaseConfig = {
            apiKey: "AIzaSyAU3uhD1AbrtYCvcaAIKYFERQfjfyoZjSo",
            authDomain: "market-dz-3cd05.firebaseapp.com",
            projectId: "market-dz-3cd05",
            storageBucket: "market-dz-3cd05.firebasestorage.app",
            messagingSenderId: "74224676367",
            appId: "1:74224676367:web:987c2a6496ea03a63b7d7a"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Ø¬Ù„Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¨Ø´ÙƒÙ„ Ù…Ø¨Ø§Ø´Ø± (Real-time)
        onSnapshot(collection(db, "orders"), (snapshot) => {
            const list = document.getElementById('ordersList');
            list.innerHTML = "";
            snapshot.forEach((order) => {
                const data = order.data();
                list.innerHTML += `
                    <div class="order-card">
                        <div class="info">
                            <strong>Ø§Ù„Ø²Ø¨ÙˆÙ†:</strong> ${data.customer} <br>
                            <strong>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„:</strong> ${data.email} <br>
                            <strong>Ø§Ù„Ù…Ù†ØªØ¬:</strong> ${data.product} <br>
                            <strong>Ø§Ù„Ø³Ø¹Ø±:</strong> <span class="price">${data.price}</span>
                        </div>
                        <button class="delete-btn" onclick="deleteOrder('${order.id}')">ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ° âœ“</button>
                    </div>
                `;
            });
        });

        window.deleteOrder = async (id) => {
            if(confirm("Ù‡Ù„ ØªÙ… Ø´Ø­Ù† Ø§Ù„Ø·Ù„Ø¨ ÙˆØªØ±ÙŠØ¯ Ø­Ø°ÙÙ‡ØŸ")) {
                await deleteDoc(doc(db, "orders", id));
            }
        };
    </script>
</body>
</html>
